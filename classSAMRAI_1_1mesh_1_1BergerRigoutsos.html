<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SAMRAI: SAMRAI::mesh::BergerRigoutsos Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespaceSAMRAI.html">SAMRAI</a>::<a class="el" href="namespaceSAMRAI_1_1mesh.html">mesh</a>::<a class="el" href="classSAMRAI_1_1mesh_1_1BergerRigoutsos.html">BergerRigoutsos</a></div>
<h1>SAMRAI::mesh::BergerRigoutsos Class Reference</h1><!-- doxytag: class="SAMRAI::mesh::BergerRigoutsos" --><!-- doxytag: inherits="SAMRAI::mesh::BoxGeneratorStrategy" -->Asynchronous Berger-Rigoutsos implementation. This class is derived from the abstract base class <a class="el" href="classSAMRAI_1_1mesh_1_1BoxGeneratorStrategy.html">mesh::BoxGeneratorStrategy</a>. Thus, it serves as a concrete implementation of the box generator Strategy pattern interface.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;source/SAMRAI/mesh/BergerRigoutsos.h&gt;</code>
<p>
<p>Inheritance diagram for SAMRAI::mesh::BergerRigoutsos:
<p><center><img src="classSAMRAI_1_1mesh_1_1BergerRigoutsos.png" usemap="#SAMRAI::mesh::BergerRigoutsos_map" border="0" alt=""></center>
<map name="SAMRAI::mesh::BergerRigoutsos_map">
<area href="classSAMRAI_1_1mesh_1_1BoxGeneratorStrategy.html" alt="SAMRAI::mesh::BoxGeneratorStrategy" shape="rect" coords="0,0,226,24">
</map>
<a href="classSAMRAI_1_1mesh_1_1BergerRigoutsos-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSAMRAI_1_1mesh_1_1BergerRigoutsos.html#077015df5b4550d8c0a49c34d5aa4c9e">BergerRigoutsos</a> (const <a class="el" href="classSAMRAI_1_1tbox_1_1Dimension.html">tbox::Dimension</a> &amp;dim, const boost::shared_ptr&lt; <a class="el" href="classSAMRAI_1_1tbox_1_1Database.html">tbox::Database</a> &gt; &amp;input_db=boost::shared_ptr&lt; <a class="el" href="classSAMRAI_1_1tbox_1_1Database.html">tbox::Database</a> &gt;())</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#077015df5b4550d8c0a49c34d5aa4c9e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSAMRAI_1_1mesh_1_1BergerRigoutsos.html#ad317b5cf9b2ae09c549dbfbbcac6de0">~BergerRigoutsos</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor.  <a href="#ad317b5cf9b2ae09c549dbfbbcac6de0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSAMRAI_1_1mesh_1_1BergerRigoutsos.html#b0e1d00ae91ba00f81503a4c73a213d4">setMPI</a> (const <a class="el" href="classSAMRAI_1_1tbox_1_1SAMRAI__MPI.html">tbox::SAMRAI_MPI</a> &amp;mpi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the MPI communication object.  <a href="#b0e1d00ae91ba00f81503a4c73a213d4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSAMRAI_1_1mesh_1_1BergerRigoutsos.html#04c2058f05e169a6dba7700d1b24120b">findBoxesContainingTags</a> (<a class="el" href="classSAMRAI_1_1hier_1_1BoxLevel.html">hier::BoxLevel</a> &amp;new_box_level, <a class="el" href="classSAMRAI_1_1hier_1_1Connector.html">hier::Connector</a> &amp;tag_to_new, <a class="el" href="classSAMRAI_1_1hier_1_1Connector.html">hier::Connector</a> &amp;new_to_tag, const boost::shared_ptr&lt; <a class="el" href="classSAMRAI_1_1hier_1_1PatchLevel.html">hier::PatchLevel</a> &gt; &amp;tag_level, const int tag_data_index, const int tag_val, const <a class="el" href="classSAMRAI_1_1hier_1_1BoxContainer.html">hier::BoxContainer</a> &amp;bound_boxes, const <a class="el" href="classSAMRAI_1_1hier_1_1IntVector.html">hier::IntVector</a> &amp;min_box, const double efficiency_tol, const double combine_tol, const <a class="el" href="classSAMRAI_1_1hier_1_1IntVector.html">hier::IntVector</a> &amp;max_gcw, const <a class="el" href="classSAMRAI_1_1hier_1_1LocalId.html">hier::LocalId</a> &amp;first_local_id) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implement the <a class="el" href="classSAMRAI_1_1mesh_1_1BoxGeneratorStrategy.html">mesh::BoxGeneratorStrategy</a> interface method of the same name.  <a href="#04c2058f05e169a6dba7700d1b24120b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSAMRAI_1_1mesh_1_1BergerRigoutsos.html#1741ca7d64e70b035b6a1359da849b3e">getObjectName</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the name of this object.  <a href="#1741ca7d64e70b035b6a1359da849b3e"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSAMRAI_1_1mesh_1_1BergerRigoutsos.html#50e60dd265a642318586706697340a52">getFromInput</a> (const boost::shared_ptr&lt; <a class="el" href="classSAMRAI_1_1tbox_1_1Database.html">tbox::Database</a> &gt; &amp;input_db)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read parameters from input database.  <a href="#50e60dd265a642318586706697340a52"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Asynchronous Berger-Rigoutsos implementation. This class is derived from the abstract base class <a class="el" href="classSAMRAI_1_1mesh_1_1BoxGeneratorStrategy.html">mesh::BoxGeneratorStrategy</a>. Thus, it serves as a concrete implementation of the box generator Strategy pattern interface. 
<p>
This class uses the <a class="el" href="classSAMRAI_1_1mesh_1_1BergerRigoutsosNode.html">BergerRigoutsosNode</a> class to carry out the asynchronous Berger-Rigoutsos algorithm. It handles aspects not central to that algorithm. It:<ul>
<li>Implements the box generator Strategy pattern interface.</li><li>Provides an interface with the input database for setting parameters influencing the implementation.</li><li>Sorts the output data (if user requests).</li><li>Performs some additional error checking. For more details on the parallel implementation, see <a class="el" href="classSAMRAI_1_1mesh_1_1BergerRigoutsosNode.html">mesh::BergerRigoutsosNode</a>.</li></ul>
<p>
<b> Input Parameters </b><p>
<b> Definitions: </b><ul>
<li><b>max_box_size</b> The maximum cluster size allowed. This parameter is not critical to clustering but limiting the cluster size may improve performance of load balancing algorithms (due to the excessive work required by the owner of huge clusters).</li></ul>
<p>
<ul>
<li><b>sort_output_nodes</b> Whether to sort the output. This makes the normally non-deterministic ordering deterministic and the results repeatable.</li></ul>
<p>
<ul>
<li><b>check_min_box_size</b> A flag to control how to resolve an initial box that violates the minimum box size. Set to one of these strings: <br>
 <b>"IGNORE"</b> - violations will be quietly disregarded. <br>
 <b>"WARN"</b> - violations will cause a warning but the code will continue anyway. <br>
 <b>"ERROR"</b> - violations will cause an unrecoverable assertion.</li></ul>
<p>
<b> Details: </b> <br>
 <table border="1" cellspacing="3" cellpadding="3">
<tr>
<th>parameter </th><th>type </th><th>default </th><th>range </th><th>opt/req </th><th>behavior on restart  </th></tr>
<tr>
<td>max_box_size </td><td>int[] </td><td>all valules max int </td><td>all value &gt; 0 </td><td>opt </td><td>Not written to restart. Value in input db used.  </td></tr>
<tr>
<td>sort_output_nodes </td><td>bool </td><td>FALSE </td><td>TRUE, FALSE </td><td>opt </td><td>Not written to restart. Value in input db used.  </td></tr>
<tr>
<td>check_min_box_size </td><td>string </td><td>"WARN" </td><td>"WARN", "IGNORE", "ERROR" </td><td>opt </td><td>Not written to restart. Value in input db used.  </td></tr>
</table>

<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="077015df5b4550d8c0a49c34d5aa4c9e"></a><!-- doxytag: member="SAMRAI::mesh::BergerRigoutsos::BergerRigoutsos" ref="077015df5b4550d8c0a49c34d5aa4c9e" args="(const tbox::Dimension &amp;dim, const boost::shared_ptr&lt; tbox::Database &gt; &amp;input_db=boost::shared_ptr&lt; tbox::Database &gt;())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SAMRAI::mesh::BergerRigoutsos::BergerRigoutsos           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1tbox_1_1Dimension.html">tbox::Dimension</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="classSAMRAI_1_1tbox_1_1Database.html">tbox::Database</a> &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>input_db</em> = <code>boost::shared_ptr&lt;&nbsp;<a class="el" href="classSAMRAI_1_1tbox_1_1Database.html">tbox::Database</a>&nbsp;&gt;()</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor. 
<p>

</div>
</div><p>
<a class="anchor" name="ad317b5cf9b2ae09c549dbfbbcac6de0"></a><!-- doxytag: member="SAMRAI::mesh::BergerRigoutsos::~BergerRigoutsos" ref="ad317b5cf9b2ae09c549dbfbbcac6de0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SAMRAI::mesh::BergerRigoutsos::~BergerRigoutsos           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destructor. 
<p>
Deallocate internal data. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b0e1d00ae91ba00f81503a4c73a213d4"></a><!-- doxytag: member="SAMRAI::mesh::BergerRigoutsos::setMPI" ref="b0e1d00ae91ba00f81503a4c73a213d4" args="(const tbox::SAMRAI_MPI &amp;mpi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SAMRAI::mesh::BergerRigoutsos::setMPI           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1tbox_1_1SAMRAI__MPI.html">tbox::SAMRAI_MPI</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>mpi</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the MPI communication object. 
<p>
Duplicate the communicator in the given for private use. A private communicator isolates the complex communications used by the asynchronous algorithm from other communications. Duplicating the communicator is expensive but should only be need once. All processes in the communicator must participate. The duplicate communicator is active until this object is destructed. Using a duplicated MPI communicator is optional but recommended. When a duplicate MPI communicator is in use, it must be congruent with the communicator associated with the tag level.<p>
If the communicator is not set, the parallel clustering algorithm uses the communicator of the input tag box_level. If it is set, then the algorithm only works for input tag box_levels with a congruent communicator.<p>
If communicator is SAMRAI_MPI::commNull, it is the same as not using a duplicate communicator. 
</div>
</div><p>
<a class="anchor" name="04c2058f05e169a6dba7700d1b24120b"></a><!-- doxytag: member="SAMRAI::mesh::BergerRigoutsos::findBoxesContainingTags" ref="04c2058f05e169a6dba7700d1b24120b" args="(hier::BoxLevel &amp;new_box_level, hier::Connector &amp;tag_to_new, hier::Connector &amp;new_to_tag, const boost::shared_ptr&lt; hier::PatchLevel &gt; &amp;tag_level, const int tag_data_index, const int tag_val, const hier::BoxContainer &amp;bound_boxes, const hier::IntVector &amp;min_box, const double efficiency_tol, const double combine_tol, const hier::IntVector &amp;max_gcw, const hier::LocalId &amp;first_local_id) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SAMRAI::mesh::BergerRigoutsos::findBoxesContainingTags           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSAMRAI_1_1hier_1_1BoxLevel.html">hier::BoxLevel</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>new_box_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSAMRAI_1_1hier_1_1Connector.html">hier::Connector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tag_to_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSAMRAI_1_1hier_1_1Connector.html">hier::Connector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>new_to_tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="classSAMRAI_1_1hier_1_1PatchLevel.html">hier::PatchLevel</a> &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>tag_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>tag_data_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>tag_val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1hier_1_1BoxContainer.html">hier::BoxContainer</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>bound_boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1hier_1_1IntVector.html">hier::IntVector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>min_box</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>efficiency_tol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>combine_tol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1hier_1_1IntVector.html">hier::IntVector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>max_gcw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1hier_1_1LocalId.html">hier::LocalId</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>first_local_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Implement the <a class="el" href="classSAMRAI_1_1mesh_1_1BoxGeneratorStrategy.html">mesh::BoxGeneratorStrategy</a> interface method of the same name. 
<p>
Create a set of boxes that covers all integer tags on the patch level that match the specified tag value. Each box will be at least as large as the given minimum size and the tolerances will be met.<p>
The efficiency tolerance is a threshold value for the percentage of tagged cells in each box. If this percentage is below the tolerance, the box will continue to be split into smaller boxes.<p>
The combine tolerance is a threshold value for the sum of the volumes of two boxes into which a box may be potentially split. If ratio of that sum and the volume of the original box, the box will not be split.<p>
<dl compact><dt><b>Precondition:</b></dt><dd>!bound_boxes.isEmpty() <p>
(new_box_level.getDim() == tag_level-&gt;getDim()) &amp;&amp; (new_box_level.getDim() == (*(bound_boxes.begin())).getDim()) &amp;&amp; (new_box_level.getDim() == min_box.getDim()) &amp;&amp; (new_box_level.getDim() == max_gcw.getDim()) </dd></dl>

<p>
Implements <a class="el" href="classSAMRAI_1_1mesh_1_1BoxGeneratorStrategy.html#f3864a9c67e44564a407fcec1fbea748">SAMRAI::mesh::BoxGeneratorStrategy</a>.
</div>
</div><p>
<a class="anchor" name="1741ca7d64e70b035b6a1359da849b3e"></a><!-- doxytag: member="SAMRAI::mesh::BergerRigoutsos::getObjectName" ref="1741ca7d64e70b035b6a1359da849b3e" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string SAMRAI::mesh::BergerRigoutsos::getObjectName           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the name of this object. 
<p>

</div>
</div><p>
<a class="anchor" name="50e60dd265a642318586706697340a52"></a><!-- doxytag: member="SAMRAI::mesh::BergerRigoutsos::getFromInput" ref="50e60dd265a642318586706697340a52" args="(const boost::shared_ptr&lt; tbox::Database &gt; &amp;input_db)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SAMRAI::mesh::BergerRigoutsos::getFromInput           </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="classSAMRAI_1_1tbox_1_1Database.html">tbox::Database</a> &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>input_db</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read parameters from input database. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>input_db</em>&nbsp;</td><td>Input Database. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>source/SAMRAI/mesh/<a class="el" href="BergerRigoutsos_8h.html">BergerRigoutsos.h</a><li>source/SAMRAI/mesh/<a class="el" href="BergerRigoutsos_8C.html">BergerRigoutsos.C</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on 16 Jan 2013 for SAMRAI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
